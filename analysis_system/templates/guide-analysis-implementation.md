# � 分析工作流实施指导

> **模板作用**: 提供分析工作流的使用指导和最佳实践  
> **目标用户**: 首次使用分析工作流模板的用户  
> **更新时间**: 2025年7月22日

## 🚀 快速开始

### 📋 使用步骤（5分钟快速上手）

1. **复制工作流模板**
   ```powershell
   Copy-Item analysis_workflow_template.md analysis_workflow_项目名.md
   ```

2. **填写项目基本信息**（在新文件的"任务信息"部分）
   - 项目类型和技术栈
   - 分析目标和关注重点
   - 技术环境描述

3. **启动分析流程**
   - 按照"总-分-总"结构执行
   - 从阶段一开始逐步推进

### 🎯 模板选择指南

#### 分析阶段模板选择

| 分析阶段 | 使用模板 | 模板用途 |
|----------|----------|----------|
| **阶段一：总体规划** | `planning-master-analysis-plan.md` | 制定完整分析策略 |
| **阶段二：循环分析** | `planning-round-plan.md` | 制定单轮分析计划 |
| **阶段二：轮次报告** | `report-round-analysis.md` | 生成轮次分析报告 |
| **阶段三：汇总报告** | `report-analysis-final.md` | 生成最终分析报告 |
| **阶段三：执行摘要** | `report-summary.md` | 生成管理层摘要 |

#### 专项分析模板选择

| 分析类型 | 使用模板 | 适用场景 |
|----------|----------|----------|
| **代码质量审查** | `specialist-code-review.md` | 代码质量详细分析 |
| **性能问题分析** | `specialist-performance.md` | 性能瓶颈识别和优化 |
| **方法论总结** | `specialist-methodology.md` | 分析经验和方法沉淀 |

#### 重构相关模板选择

| 重构阶段 | 使用模板 | 模板职责 |
|----------|----------|----------|
| **技术设计** | `refactor-design-plan.md` | 架构设计、接口定义、流程设计 |
| **总体规划** | `refactor-overall-plan.md` | 多阶段重构计划和实施策略 |
| **详细实施** | `refactor-stage-detail.md` | 具体任务分解和实施步骤 |

#### 管理类模板选择

| 管理需求 | 使用模板 | 使用时机 |
|----------|----------|----------|
| **项目索引** | `mgmt-index.md` | 创建项目文档导航 |
| **经验总结** | `mgmt-lessons-learned.md` | 记录分析过程收获 |
| **决策记录** | `mgmt-user-decision.md` | 记录重要决策和依据 |

## � 分析流程详解

### 🏗️ 总-分-总结构说明

**阶段一：总体规划（总）**
- **目标**: 建立分析框架和总体计划
- **核心任务**: 需求分析、计划制定、环境初始化
- **输出**: 总体分析计划、工作目录结构

**阶段二：循环分析（分）**
- **目标**: 执行具体的分析循环
- **核心任务**: 9步分析循环，产出专项报告
- **输出**: 轮次分析报告、关键发现、改进建议

**阶段三：汇总报告（总）**
- **目标**: 整合分析结果，制定行动计划
- **核心任务**: 完成度评估、汇总报告、最终归档
- **输出**: 最终分析报告、执行摘要、改进路线图

### 🔄 9步分析循环详解

1. **步骤1**: 制定轮次计划 → 使用 `planning-round-plan.md`
2. **步骤2**: 代码扫描和理解 → 代码阅读和结构分析
3. **步骤3**: 量化分析 → 代码指标计算
4. **步骤4**: 问题识别 → 问题发现和分类
5. **步骤5**: 深度分析 → 使用专项模板深入分析
6. **步骤6**: 改进建议 → 制定具体改进方案
7. **步骤7**: 文档整理 → 使用 `report-round-analysis.md`
8. **步骤8**: 决策确认 → 使用 `mgmt-user-decision.md`
9. **步骤9**: 经验总结 → 使用 `mgmt-lessons-learned.md`

## 💡 最佳实践指南

### 📝 项目信息填写最佳实践

**项目类型描述示例**:
- ✅ 好的描述: "ANC音频信号处理系统，专注实时音频降噪算法"
- ❌ 差的描述: "Python项目"

**技术栈描述示例**:
- ✅ 好的描述: "Python 3.9 + NumPy + SciPy + PySide6 + PyQt图形界面"
- ❌ 差的描述: "Python"

**分析目标描述示例**:
- ✅ 好的描述: "控制器解析模块重构，统一解析逻辑，支持多版本扩展"
- ❌ 差的描述: "代码分析"

### 🎯 分析重点建议

**代码质量分析重点**:
- 函数复杂度（圈复杂度>10需关注）
- 代码重复率（>5%需优化）
- 模块耦合度（高耦合需解耦）
- 命名规范一致性

**性能分析重点**:
- 热点函数识别
- 内存使用模式
- I/O密集操作
- 算法复杂度评估

**架构分析重点**:
- 模块职责清晰度
- 依赖关系合理性
- 扩展性设计
- 接口设计质量

### 📁 文件组织最佳实践

**目录命名规范**:
```
tasks/
├── 项目名_控制器解析重构/          # 主题目录
│   ├── master_plan/              # 总体规划
│   ├── 1_初始质量评估/           # 第1轮分析
│   ├── 2_架构设计分析/           # 第2轮分析
│   └── 3_实施计划制定/           # 第3轮分析
```

**文件命名规范**:
- 计划文件: `round_plan.md`、`master_analysis_plan.md`
- 报告文件: `round_analysis_report.md`、`final_analysis_report.md`
- 专项分析: `code_review_report.md`、`performance_analysis.md`

## ⚠️ 常见问题和解决方案

### 问题1：不知道选择哪个模板

**解决方案**: 
- 查看本指导的"模板选择指南"部分
- 按照分析阶段选择对应模板
- 重构相关按"设计→规划→实施"顺序选择

### 问题2：分析深度不够

**解决方案**:
- 使用专项分析模板深入特定领域
- 结合多种分析方法（静态+动态+人工）
- 参考`specialist-methodology.md`模板

### 问题3：分析结果难以落地

**解决方案**:
- 使用重构模板制定可执行计划
- 设置清晰的里程碑和验收标准
- 采用渐进式实施策略

### 问题4：文档过多难以管理

**解决方案**:
- 使用`mgmt-index.md`创建文档索引
- 按照标准目录结构组织文件
- 定期清理和归档过期文档

## 🔧 高级使用技巧

### 多项目并行分析

**组织方式**:
```
tasks/
├── 项目A_模块重构/
├── 项目B_性能优化/
└── 项目C_架构升级/
```

### 团队协作分析

**分工建议**:
- **架构师**: 负责架构分析和设计方案
- **开发工程师**: 负责代码质量和实施计划
- **测试工程师**: 负责质量验证和风险评估

### 分析结果复用

**方法**:
- 建立分析模式库
- 沉淀分析方法论
- 创建问题解决方案库

## 📚 参考资源

### 相关文档

- **主模板**: `analysis_workflow_template.md` - 完整工作流模板
- **重构指导**: `guide-refactoring-readme.md` - 重构模板使用说明
- **方法论**: `specialist-methodology.md` - 分析方法和经验总结

### 学习资源

- **代码质量**: 参考业界代码质量标准和最佳实践
- **重构方法**: 学习Martin Fowler的重构理论
- **架构设计**: 了解常见的架构模式和设计原则

---

**开始使用**: 复制 `analysis_workflow_template.md` 并按照本指导开始您的代码分析之旅！

**获取帮助**: 遇到问题时，请查看相关模板的使用说明或参考已完成的分析案例。

### 阶段3：动态性能分析 ✅/❌

- [ ] 性能剖析
- [ ] 资源使用分析
- [ ] 性能瓶颈识别
- [ ] 算法复杂度验证

### 阶段4：安全和最佳实践 ✅/❌

- [ ] 安全漏洞扫描
- [ ] 最佳实践评估
- [ ] 代码规范检查
- [ ] 异常处理评估

### 阶段5：技术债务评估 ✅/❌

- [ ] 债务识别
- [ ] 债务量化
- [ ] 优先级排序
- [ ] 修复成本评估

### 阶段6：重构建议 ✅/❌

- [ ] 重构策略制定
- [ ] 实施计划制定
- [ ] 风险评估
- [ ] 验证标准设定

---

## 📋 分析结果记录模板

### 项目基本信息

**项目名称**: _______________  
**分析日期**: _______________  
**代码行数**: _______________  
**文件数量**: _______________  
**主要语言**: _______________  

### 质量指标总览

| 指标类别 | 指标名称 | 当前值 | 目标值 | 状态 |
|----------|----------|--------|--------|------|
| 代码复杂度 | 平均圈复杂度 | | < 10 | |
| 代码复杂度 | 维护性指数 | | > 70 | |
| 代码质量 | 重复代码率 | | < 5% | |
| 代码质量 | 注释覆盖率 | | > 20% | |
| 架构质量 | 模块耦合度 | | 低 | |
| 性能 | 主要瓶颈数量 | | < 5 | |

### 主要发现

#### 🔴 关键问题

1. **[问题类别]**: [问题描述]
   - 影响程度: 高/中/低
   - 修复难度: 高/中/低
   - 建议行动: [具体建议]

2. **[问题类别]**: [问题描述]
   - 影响程度: 高/中/低
   - 修复难度: 高/中/低
   - 建议行动: [具体建议]

#### 🟡 需要关注的问题

1. [问题描述]
2. [问题描述]
3. [问题描述]

#### 🟢 优秀实践

1. [优秀实践描述]
2. [优秀实践描述]
3. [优秀实践描述]

### 技术债务清单

| 债务类型 | 描述 | 位置 | 影响程度 | 修复成本 | 优先级 |
|----------|------|------|----------|----------|--------|
| 代码债务 | | | 高/中/低 | X天 | 高/中/低 |
| 架构债务 | | | 高/中/低 | X天 | 高/中/低 |
| 文档债务 | | | 高/中/低 | X天 | 高/中/低 |
| 测试债务 | | | 高/中/低 | X天 | 高/中/低 |

### 改进建议

#### 短期改进（1-2个月）

1. **[改进项目]**
   - 目标: [改进目标]
   - 方法: [具体方法]
   - 预期效果: [预期效果]
   - 风险: [潜在风险]

#### 中期改进（3-6个月）

1. **[改进项目]**
   - 目标: [改进目标]
   - 方法: [具体方法]
   - 预期效果: [预期效果]
   - 风险: [潜在风险]

#### 长期改进（6个月以上）

1. **[改进项目]**
   - 目标: [改进目标]
   - 方法: [具体方法]
   - 预期效果: [预期效果]
   - 风险: [潜在风险]

---

## 📈 分析工具使用记录

### 使用的工具

- [ ] **pylint**: 代码质量检查
- [ ] **flake8**: 代码风格检查  
- [ ] **radon**: 复杂度分析
- [ ] **bandit**: 安全检查
- [ ] **cProfile**: 性能剖析
- [ ] **custom tools**: 自定义分析工具

### 工具输出文件

| 工具 | 输出文件 | 状态 | 备注 |
|------|----------|------|------|
| code-metrics-collector | reports/basic-metrics.json | ✅/❌ | |
| complexity-analyzer | reports/complexity-report.json | ✅/❌ | |
| dependency-analyzer | reports/dependency-graph.json | ✅/❌ | |
| security-scanner | reports/security-report.json | ✅/❌ | |
| performance-profiler | reports/performance.prof | ✅/❌ | |

---

## 🔄 后续跟踪

### 下次分析计划

**计划日期**: _______________  
**分析重点**: _______________  
**预期改进**: _______________  

### 改进实施跟踪

| 改进项目 | 开始日期 | 预期完成 | 实际完成 | 状态 | 备注 |
|----------|----------|----------|----------|------|------|
| | | | | 进行中/已完成/暂停 | |
| | | | | 进行中/已完成/暂停 | |
| | | | | 进行中/已完成/暂停 | |

---

**模板版本**: v1.0  
**创建日期**: 2025年7月11日  
**适用范围**: Python项目代码分析
